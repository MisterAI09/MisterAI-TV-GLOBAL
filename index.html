<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MisterAI TV GLOBAL 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

    <style>
        :root { 
            --main:#4834d4; --glow:#00cec9; --bg:#050505;
            --color1:#FF6B8B; --color2:#6A5AF9; --color3:#00D4FF;
            --color4:#00F5A0; --color5:#FFD166; --twitter: #1DA1F2;
        }
        * { box-sizing:border-box; margin: 0; padding: 0; }
        body { font-family:'Cairo',sans-serif; background:var(--bg); color:#fff; display:flex; height:100vh; overflow:hidden; }

        /* Sidebar */
        .sidebar { width:380px; background:rgba(10, 10, 10, 0.95); border-left:2px solid var(--main); display:flex; flex-direction:column; backdrop-filter: blur(10px); z-index: 10; }
        
        /* Auth Section */
        .auth-section { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .btn-twitter { background: var(--twitter); color: white; border: none; padding: 12px; border-radius: 25px; cursor: pointer; width: 100%; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 10px; font-size: 0.9rem; }
        .user-card { display: none; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 15px; border: 1px solid var(--color4); }
        .user-card img { width: 35px; border-radius: 50%; }

        /* Chat Section */
        .chat-section { height: 280px; display: flex; flex-direction: column; padding: 10px; border-bottom: 1px solid #222; background: rgba(0,0,0,0.2); }
        #chatBox { flex: 1; overflow-y: auto; padding: 5px; display: flex; flex-direction: column; gap: 10px; }
        .msg-bubble { background: #1a1b2e; padding: 10px; border-radius: 12px; border-right: 3px solid var(--color3); border: 1px solid #2d2e4d; }
        .msg-header { display: flex; justify-content: space-between; font-size: 0.75rem; margin-bottom: 5px; }
        .msg-name { color: var(--color3); font-weight: bold; }
        .chat-input-area { display: flex; gap: 8px; margin-top: 10px; }
        #chatInp { flex: 1; background: #000; border: 1px solid #333; color: #fff; padding: 10px; border-radius: 8px; font-family: 'Cairo'; }

        /* Channels List */
        .list { flex: 1; overflow-y: auto; padding: 15px; }
        .cat { padding: 12px; margin: 15px 0 8px; background: rgba(72, 52, 212, 0.2); color: var(--color3); font-weight: bold; border-right: 4px solid var(--color3); border-radius: 8px; }
        .btn { padding: 14px; margin: 8px 0; background: rgba(22, 22, 37, 0.8); border-radius: 10px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: .3s; border: 1px solid rgba(255,255,255,0.05); }
        .btn:hover { background: var(--main); transform: translateX(-8px); }
        .badge { font-size: .7rem; background: var(--color1); padding: 4px 10px; border-radius: 20px; font-weight: bold; }

        /* Main Video View */
        .video-view { flex: 1; background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
        .player-placeholder { text-align: center; }
        .player-placeholder h1 { font-size: 3rem; background: linear-gradient(var(--color3), var(--color2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        @media (max-width: 900px) { body { flex-direction: column; } .sidebar { width: 100%; height: auto; } }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="auth-section">
        <button id="loginBtn" class="btn-twitter" onclick="loginTwitter()">
            <i class="fab fa-twitter"></i> سجل دخولك عبر X للدردشة
        </button>
        <div id="userProfile" class="user-card">
            <div style="display:flex; align-items:center; gap:10px;">
                <img id="uImg" src="" alt="Avatar">
                <span id="uName" style="font-size:0.85rem; font-weight:bold;"></span>
            </div>
            <button onclick="logout()" style="background:none; border:none; color:var(--color1); cursor:pointer;"><i class="fas fa-sign-out-alt"></i></button>
        </div>
    </div>

    <div class="chat-section">
        <div id="chatBox"></div>
        <div class="chat-input-area">
            <input type="text" id="chatInp" placeholder="سجل دخولك لتتمكن من الكتابة..." disabled>
            <button onclick="sendMsg()" style="background:var(--color4); border:none; padding:10px 15px; border-radius:8px; cursor:pointer; color:#000;"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <div class="list" id="fullChannelsList"></div>
</div>

<div class="video-view">
    <div class="player-placeholder">
        <h1>MisterAI TV</h1>
        <p style="color:var(--color5); margin-top:10px;">البث المباشر - دور ربع النهائي 2026</p>
    </div>
</div>

<script>
// إعدادات Firebase من الصور الخاصة بك
const firebaseConfig = {
    apiKey: "AIzaSyClWIg83c4GDFNrZxxVFI6QEldRzX8vB90",
    authDomain: "mister-ai-tv-global.firebaseapp.com",
    projectId: "mister-ai-tv-global",
    storageBucket: "mister-ai-tv-global.firebasestorage.app",
    messagingSenderId: "400120947350",
    appId: "1:400120947350:web:163e52bffb0c5129e9d8b7",
    measurementId: "G-8D17GJTMB1"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

// --- نظام القنوات الأصلي (كامل) ---
const channels = [
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 1 4K",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432904.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 1 FHD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432903.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 1 HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432902.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 1 SD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432901.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 2 4K",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432900.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 2 FHD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432899.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 2 HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432898.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 2 SD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432897.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 3 4K",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432896.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 3 FHD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432895.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 3 HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432894.m3u8 "},
    {c:"beIN SPORTS MAX (CAN)",n:"beIN MAX 3 SD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432893.m3u8 "},
    {c:"ALGERIA",n:"PROGRAMME NATIONAL DZ HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432888.m3u8 "},
    {c:"FRANCE",n:"CANAL+ CAN HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432884.m3u8 "},
    {c:"beIN PREMIUM",n:"beIN SPORT 1",u:"http://135.125.109.73:9000/beinsport1_.m3u8 "},
    {c:"beIN PREMIUM",n:"beIN SPORT 2",u:"http://135.125.109.73:9000/beinsport2_.m3u8 "},
    {c:"RAKUTEN TV UK",n:"Rakuten TV Top Movies UK",u:"https://0145451975a64b35866170fd2e8fa486.mediatailor.eu-west-1.amazonaws.com/v1/master/0547f18649bd788bec7b67b746e47670f558b6b2/production-LiveChannel-5987/master.m3u8"}
];

const listElement = document.getElementById("fullChannelsList");
let currentCat = "";
channels.forEach(ch => {
    if(ch.c !== currentCat){
        const catDiv = document.createElement("div"); catDiv.className = "cat"; catDiv.textContent = ch.c;
        listElement.appendChild(catDiv); currentCat = ch.c;
    }
    const btn = document.createElement("div"); btn.className = "btn";
    btn.innerHTML = `<span>${ch.n}</span><span class="badge">LIVE</span>`;
    btn.onclick = () => window.open(ch.u, "_blank");
    listElement.appendChild(btn);
});

// --- وظائف Firebase ---
function loginTwitter() {
    const provider = new firebase.auth.TwitterAuthProvider();
    auth.signInWithPopup(provider).catch(err => console.log(err));
}

function logout() { auth.signOut(); }

auth.onAuthStateChanged(user => {
    if(user) {
        document.getElementById('loginBtn').style.display = 'none';
        document.getElementById('userProfile').style.display = 'flex';
        document.getElementById('uImg').src = user.photoURL;
        document.getElementById('uName').textContent = '@' + user.displayName;
        document.getElementById('chatInp').disabled = false;
        document.getElementById('chatInp').placeholder = "اكتب رسالة الآن...";
    } else {
        document.getElementById('loginBtn').style.display = 'flex';
        document.getElementById('userProfile').style.display = 'none';
        document.getElementById('chatInp').disabled = true;
    }
});

function sendMsg() {
    const inp = document.getElementById('chatInp');
    if(inp.value.trim() && auth.currentUser) {
        db.ref('messages').push({
            name: auth.currentUser.displayName,
            photo: auth.currentUser.photoURL,
            text: inp.value,
            time: Date.now()
        });
        inp.value = "";
    }
}

db.ref('messages').limitToLast(15).on('child_added', (snap) => {
    const d = snap.val();
    const box = document.getElementById('chatBox');
    const msg = document.createElement('div');
    msg.className = 'msg-bubble';
    msg.innerHTML = `
        <div class="msg-header">
            <span class="msg-name">@${d.name}</span>
            <span>${new Date(d.time).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
        </div>
        <div style="font-size:0.9rem">${d.text}</div>
    `;
    box.appendChild(msg);
    box.scrollTop = box.scrollHeight;
});
</script>
</body>
</html>
