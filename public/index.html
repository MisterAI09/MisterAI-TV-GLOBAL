<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MisterAI TV - Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± ÙƒØ£Ø³ Ø£ÙØ±ÙŠÙ‚ÙŠØ§ 2026 Ù…Ø¹ Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¨Ø§Ø´Ø±Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    
    <style>
        :root {
            --bg: #050505;
            --green: #00A859;
            --gold: #FFD700;
            --red: #D62828;
            --blue: #1DA1F2;
            --purple: #9C27B0;
            --cyan: #00BCD4;
            --dark-blue: #0d8bd9;
            --dark-red: #b22222;
            --sidebar-width: 350px;
            --success: #4CAF50;
            --warning: #FF9800;
            --info: #2196F3;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg);
            color: #fff;
            position: relative;
            min-height: 100vh;
        }
        
        /* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .gradient-bg {
            position: absolute;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                var(--green), 
                #006233,
                var(--red),
                var(--gold),
                var(--blue),
                #000000);
            opacity: 0.08;
            animation: rotateGradient 40s linear infinite;
        }
        
        @keyframes rotateGradient {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Ù…Ø¤Ø´Ø± Ø§Ù„Ø§ØªØµØ§Ù„ */
        .connection-status {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .connection-status.connected {
            background: rgba(0, 168, 89, 0.2);
            color: var(--green);
            border-color: var(--green);
        }
        
        .connection-status.connecting {
            background: rgba(255, 215, 0, 0.2);
            color: var(--gold);
            border-color: var(--gold);
        }
        
        .connection-status.disconnected {
            background: rgba(214, 40, 40, 0.2);
            color: var(--red);
            border-color: var(--red);
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .connected .status-dot {
            background: var(--green);
            box-shadow: 0 0 10px var(--green);
        }
        
        .connecting .status-dot {
            background: var(--gold);
            box-shadow: 0 0 10px var(--gold);
        }
        
        .disconnected .status-dot {
            background: var(--red);
            box-shadow: 0 0 10px var(--red);
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(5,5,10,0.98), rgba(0,40,20,0.95));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
            backdrop-filter: blur(5px);
        }
        
        .login-container {
            background: rgba(20, 20, 30, 0.95);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 500px;
            text-align: center;
            border: 3px solid var(--green);
            box-shadow: 0 0 50px rgba(0, 168, 89, 0.3),
                        0 0 100px rgba(29, 161, 242, 0.1);
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .login-logo {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(to right, 
                var(--green), 
                var(--gold), 
                var(--red),
                var(--blue));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            animation: logoPulse 3s infinite alternate;
        }
        
        @keyframes logoPulse {
            0% { transform: scale(1); filter: brightness(1); }
            100% { transform: scale(1.05); filter: brightness(1.2); }
        }
        
        .login-title {
            font-size: 2rem;
            font-weight: 900;
            color: var(--gold);
            margin-bottom: 10px;
        }
        
        .login-subtitle {
            color: #aaa;
            font-size: 1rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .login-form {
            margin-bottom: 30px;
        }
        
        .login-label {
            display: block;
            text-align: right;
            color: var(--blue);
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .login-input {
            width: 100%;
            padding: 15px 20px;
            border-radius: 10px;
            border: 2px solid rgba(29, 161, 242, 0.3);
            background: rgba(15, 15, 25, 0.9);
            color: white;
            font-family: 'Cairo', sans-serif;
            font-size: 1rem;
            direction: ltr;
            text-align: left;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .login-input:focus {
            outline: none;
            border-color: var(--blue);
            box-shadow: 0 0 20px rgba(29, 161, 242, 0.3);
            background: rgba(20, 20, 35, 0.95);
        }
        
        .login-input::placeholder {
            color: #666;
        }
        
        .login-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(45deg, var(--green), var(--blue));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        .login-btn:hover {
            background: linear-gradient(45deg, var(--blue), var(--green));
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(29, 161, 242, 0.4);
        }
        
        .login-btn:hover::before {
            left: 100%;
        }
        
        .login-info {
            color: #aaa;
            font-size: 0.9rem;
            margin-top: 20px;
            line-height: 1.6;
        }
        
        .login-error {
            color: var(--red);
            font-size: 0.9rem;
            margin-top: 10px;
            display: none;
            padding: 10px;
            background: rgba(214, 40, 40, 0.1);
            border-radius: 8px;
            border-right: 3px solid var(--red);
        }
        
        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-layout {
            display: flex;
            height: 100vh;
            overflow: hidden;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Ø§Ù„Ø³Ø§ÙŠØ¯Ø¨Ø§Ø± */
        .sidebar {
            width: var(--sidebar-width);
            background: rgba(10, 10, 15, 0.98);
            border-left: 3px solid var(--green);
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 10;
            box-shadow: 5px 0 20px rgba(0, 0, 0, 0.5);
            height: 100%;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .brand {
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid var(--green);
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .brand::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(0,168,89,0.1), transparent);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .logo-text {
            font-size: 2.2rem;
            font-weight: 900;
            text-shadow: 0 0 10px var(--green),
                        0 0 20px var(--green),
                        0 0 30px var(--red);
            background: linear-gradient(to right, 
                var(--green), 
                var(--gold), 
                var(--red));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(25, 25, 40, 0.8);
            padding: 10px 15px;
            border-radius: 10px;
            margin-top: 10px;
            position: relative;
            z-index: 1;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--green), var(--blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .user-details {
            flex: 1;
            min-width: 0;
        }
        
        .user-name {
            font-weight: 700;
            color: var(--gold);
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .user-twitter {
            font-size: 0.8rem;
            color: var(--blue);
            margin-top: 2px;
        }
        
        .online-counter {
            background: var(--green);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-top: 5px;
            display: inline-block;
            animation: pulse 2s infinite;
        }
        
        .logout-btn {
            background: var(--red);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .logout-btn:hover {
            background: var(--dark-red);
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(214, 40, 40, 0.3);
        }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ù†ÙˆØ§Øª */
        .list {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 0 5px;
        }
        
        .list-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--gold);
        }
        
        .refresh-btn {
            background: var(--blue);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .refresh-btn:hover {
            transform: rotate(180deg);
            background: var(--dark-blue);
        }
        
        .cat {
            padding: 10px 15px;
            margin: 12px 0 8px;
            background: rgba(20, 20, 30, 0.9);
            color: var(--gold);
            font-weight: 700;
            border-right: 3px solid var(--green);
            border-radius: 8px;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .cat-count {
            background: var(--red);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
        }
        
        .btn {
            padding: 12px 15px;
            margin: 6px 0;
            background: rgba(30, 30, 45, 0.9);
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: 0.5s;
        }
        
        .btn:hover {
            background: linear-gradient(90deg, var(--green), var(--red));
            transform: translateX(-3px);
            border-color: var(--gold);
            box-shadow: 0 3px 10px rgba(0, 168, 89, 0.3);
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn.active {
            background: linear-gradient(90deg, var(--green), var(--blue));
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(0, 168, 89, 0.3);
        }
        
        .badge {
            font-size: 0.7rem;
            background: var(--red);
            padding: 3px 8px;
            border-radius: 15px;
            font-weight: 700;
            animation: pulse 1.5s infinite;
        }
        
        .footer-rights {
            padding: 15px;
            text-align: center;
            font-size: 0.8rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(0, 0, 0, 0.4);
            flex-shrink: 0;
        }
        
        .footer-rights b {
            background: linear-gradient(to right, var(--green), var(--gold));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
        }
        
        .server-stats {
            font-size: 0.75rem;
            color: #888;
            margin-top: 5px;
        }
        
        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: rgba(5, 5, 10, 0.8);
            height: 100%;
        }
        
        .stream-area {
            flex: 1;
            display: flex;
            padding: 20px;
            gap: 20px;
            overflow: hidden;
            height: 100%;
        }
        
        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
        .video-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.85);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 168, 89, 0.2);
            border: 2px solid rgba(0, 168, 89, 0.3);
            min-width: 0;
        }
        
        .video-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--green), var(--gold), var(--red), var(--blue));
            border-radius: 17px;
            z-index: -1;
            animation: borderRotate 4s linear infinite;
        }
        
        @keyframes borderRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .video-placeholder {
            text-align: center;
            padding: 20px;
            max-width: 80%;
            z-index: 1;
        }
        
        .video-title {
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--green), var(--gold), var(--red));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .video-subtitle {
            color: #aaa;
            font-size: 1rem;
            margin-bottom: 15px;
        }
        
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--red);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-weight: 700;
            animation: pulseLive 1.5s infinite;
        }
        
        @keyframes pulseLive {
            0%, 100% { 
                box-shadow: 0 0 10px var(--red);
            }
            50% { 
                box-shadow: 0 0 20px var(--red), 0 0 30px var(--red);
            }
        }
        
        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ ÙˆØ§Ù„Ø´Ø§Øª */
        .poll-chat-container {
            width: 500px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow: hidden;
        }
        
        /* Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø§Ù„Ø±Ø£ÙŠ */
        .poll-container {
            background: rgba(15, 15, 25, 0.95);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--green);
            box-shadow: 0 0 30px rgba(0, 168, 89, 0.2);
            flex: 1;
            min-height: 0;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .poll-header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }
        
        .poll-title {
            font-size: 1.6rem;
            font-weight: 900;
            background: linear-gradient(to right, var(--green), var(--gold));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }
        
        .poll-subtitle {
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .poll-update-time {
            position: absolute;
            left: 0;
            top: 0;
            font-size: 0.8rem;
            color: #888;
        }
        
        /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© */
        .match-info {
            background: rgba(25, 25, 40, 0.9);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }
        
        .team-flag {
            font-size: 2.8rem;
            margin-bottom: 8px;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.2));
        }
        
        .team-name {
            font-size: 1.2rem;
            font-weight: 900;
            color: white;
        }
        
        .team:nth-child(1) .team-name {
            color: var(--green);
        }
        
        .team:nth-child(3) .team-name {
            color: var(--red);
        }
        
        .vs {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--gold);
            padding: 0 15px;
            animation: vsGlow 2s infinite alternate;
        }
        
        @keyframes vsGlow {
            0% { text-shadow: 0 0 5px var(--gold); }
            100% { text-shadow: 0 0 10px var(--gold), 0 0 20px var(--gold); }
        }
        
        .match-details {
            color: #aaa;
            font-size: 0.85rem;
            background: rgba(0, 0, 0, 0.3);
            padding: 6px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 8px;
        }
        
        /* Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ */
        .poll-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
            flex: 1;
            min-height: 0;
        }
        
        .poll-option {
            background: rgba(35, 35, 50, 0.9);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .poll-option:hover {
            background: rgba(45, 45, 65, 0.95);
            transform: translateX(-3px);
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        .poll-option.selected {
            background: rgba(45, 45, 65, 0.95);
            border-color: var(--green);
            box-shadow: 0 0 15px rgba(0, 168, 89, 0.2);
        }
        
        .poll-option.selected::before {
            content: 'âœ“';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--green);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .option-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .option-text {
            font-size: 1rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .option-percentage {
            font-weight: 900;
            font-size: 1.1rem;
            color: var(--gold);
        }
        
        .vote-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .vote-fill {
            height: 100%;
            border-radius: 4px;
            width: 0%;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .vote-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255,255,255,0.3), 
                transparent);
            animation: shineBar 2s infinite;
        }
        
        @keyframes shineBar {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .vote-fill.nigeria {
            background: linear-gradient(90deg, var(--green), #00F5A0);
        }
        
        .vote-fill.algeria {
            background: linear-gradient(90deg, var(--red), #FF6B8B);
        }
        
        /* Ø²Ø± Ø§Ù„ØªØµÙˆÙŠØª */
        .vote-btn {
            background: linear-gradient(45deg, var(--green), var(--gold));
            color: #000;
            border: none;
            padding: 14px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }
        
        .vote-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: 0.5s;
        }
        
        .vote-btn:hover:not(:disabled) {
            background: linear-gradient(45deg, var(--gold), var(--red));
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }
        
        .vote-btn:hover:not(:disabled)::before {
            left: 100%;
        }
        
        .vote-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØµÙˆÙŠØª */
        .vote-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 0.8rem;
            color: #aaa;
        }
        
        .vote-count {
            font-weight: 700;
            color: var(--gold);
        }
        
        /* Ù‚Ø³Ù… Ø§Ù„Ø´Ø§Øª */
        .chat-container {
            background: rgba(15, 15, 25, 0.95);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--blue);
            box-shadow: 0 0 30px rgba(29, 161, 242, 0.2);
            flex: 2;
            display: flex;
            flex-direction: column;
            min-height: 0;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .chat-header {
            text-align: center;
            margin-bottom: 15px;
            position: relative;
        }
        
        .chat-title {
            font-size: 1.6rem;
            font-weight: 900;
            background: linear-gradient(to right, var(--blue), var(--gold));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
        
        .chat-subtitle {
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .online-users {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 168, 89, 0.2);
            color: var(--green);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø§Øª */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
            background: rgba(25, 25, 40, 0.7);
            border-radius: 8px;
            margin-bottom: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 0;
        }
        
        .chat-messages:empty::before {
            content: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø¹Ø¯. ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠØ¹Ù„Ù‚!';
            display: block;
            text-align: center;
            color: #666;
            padding: 30px 15px;
            font-style: italic;
        }
        
        .message {
            margin-bottom: 12px;
            padding: 12px;
            background: rgba(35, 35, 50, 0.9);
            border-radius: 8px;
            border-left: 3px solid var(--green);
            animation: fadeIn 0.3s ease;
            transition: all 0.3s ease;
        }
        
        .message:hover {
            background: rgba(45, 45, 65, 0.95);
            transform: translateX(-3px);
        }
        
        .message.system {
            background: rgba(255, 215, 0, 0.1);
            border-left-color: var(--gold);
        }
        
        .message.vote {
            background: rgba(0, 168, 89, 0.1);
            border-left-color: var(--green);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .message-user {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: 0.9rem;
        }
        
        .message-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--green), var(--blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            flex-shrink: 0;
        }
        
        .twitter-badge {
            background: var(--blue);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 700;
        }
        
        .message-time {
            color: #888;
            font-size: 0.8rem;
        }
        
        .message-text {
            color: #ddd;
            line-height: 1.4;
            font-size: 0.9rem;
            margin-top: 6px;
            word-break: break-word;
        }
        
        .message-actions {
            display: flex;
            gap: 10px;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .message-action {
            background: none;
            border: none;
            color: #aaa;
            font-size: 0.8rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: all 0.3s ease;
        }
        
        .message-action:hover {
            color: var(--blue);
        }
        
        /* Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø´Ø§Øª */
        .chat-input-container {
            display: flex;
            gap: 8px;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(0, 168, 89, 0.3);
            background: rgba(25, 25, 40, 0.9);
            color: white;
            font-family: 'Cairo', sans-serif;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .chat-input:focus {
            outline: none;
            border-color: var(--green);
            box-shadow: 0 0 10px rgba(0, 168, 89, 0.2);
            background: rgba(30, 30, 45, 0.95);
        }
        
        .send-btn {
            padding: 12px 20px;
            background: linear-gradient(45deg, var(--green), var(--blue));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }
        
        .send-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        .send-btn:hover {
            background: linear-gradient(45deg, var(--blue), var(--green));
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(29, 161, 242, 0.3);
        }
        
        .send-btn:hover::before {
            left: 100%;
        }
        
        /* Ø²Ø± Ù…Ø´Ø§Ø±ÙƒØ© ØªÙˆÙŠØªØ± */
        .twitter-share {
            background: var(--blue);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
            text-align: center;
        }
        
        .twitter-share:hover {
            background: var(--dark-blue);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(29, 161, 242, 0.3);
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, var(--green), var(--blue));
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, var(--blue), var(--green));
        }
        
        /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 1400px) {
            .poll-chat-container {
                width: 450px;
            }
        }
        
        @media (max-width: 1200px) {
            .stream-area {
                flex-direction: column;
            }
            
            .video-container {
                height: 300px;
                min-height: 300px;
            }
            
            .poll-chat-container {
                width: 100%;
                flex-direction: row;
            }
            
            .poll-container,
            .chat-container {
                flex: 1;
            }
        }
        
        @media (max-width: 900px) {
            .main-layout {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                max-height: 50vh;
            }
            
            .stream-area {
                padding: 10px;
            }
            
            .video-container {
                height: 200px;
                min-height: 200px;
            }
            
            .poll-chat-container {
                flex-direction: column;
            }
            
            .login-container {
                padding: 30px 20px;
            }
            
            .login-logo {
                font-size: 2.5rem;
            }
            
            .login-title {
                font-size: 1.5rem;
            }
        }
        
        @media (max-width: 600px) {
            .logo-text {
                font-size: 1.8rem;
            }
            
            .video-title {
                font-size: 1.5rem;
            }
            
            .poll-title,
            .chat-title {
                font-size: 1.3rem;
            }
            
            .teams {
                flex-direction: column;
                gap: 10px;
            }
            
            .team-flag {
                font-size: 2rem;
            }
            
            .team-name {
                font-size: 1rem;
            }
            
            .vs {
                padding: 10px 0;
            }
        }
        
        /* Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© */
        .typing-indicator {
            display: none;
            padding: 8px 12px;
            color: #aaa;
            font-size: 0.85rem;
            font-style: italic;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .typing-indicator.show {
            display: block;
        }
        
        /* Ø²Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .quick-action {
            flex: 1;
            padding: 8px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            color: white;
            font-family: 'Cairo', sans-serif;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .quick-action:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        
        /* Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
        .settings-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .settings-toggle:hover {
            background: var(--blue);
            transform: rotate(45deg);
        }
    </style>
</head>

<body>
    <!-- Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© -->
    <div class="bg-animation">
        <div class="gradient-bg"></div>
    </div>

    <!-- Ù…Ø¤Ø´Ø± Ø§Ù„Ø§ØªØµØ§Ù„ -->
    <div class="connection-status connecting" id="connection-status">
        <div class="status-dot"></div>
        <span id="status-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span>
    </div>

    <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div class="login-screen" id="login-screen">
        <div class="login-container">
            <div class="login-logo">MISTERAI TV</div>
            <div class="login-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ÙƒØ£Ø³ Ø£ÙØ±ÙŠÙ‚ÙŠØ§ 2026</div>
            <div class="login-subtitle">Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±ØŒ Ø´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ØŒ ÙˆØªØ­Ø¯Ø« Ù…Ø¹ Ø§Ù„Ù…Ø´Ø¬Ø¹ÙŠÙ† ÙÙŠ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</div>
            
            <div class="login-form">
                <label class="login-label">
                    <i class="fab fa-twitter" style="color: var(--blue);"></i>
                    Ø£Ø¯Ø®Ù„ Ø­Ø³Ø§Ø¨Ùƒ Ø¹Ù„Ù‰ ØªÙˆÙŠØªØ±:
                </label>
                <input type="text" class="login-input" id="login-twitter" 
                       placeholder="@neurosisnet" autocomplete="off" autofocus>
                <div class="login-error" id="login-error"></div>
                <button class="login-btn" id="login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©
                </button>
            </div>
            
            <div class="login-info">
                <i class="fas fa-bolt" style="color: var(--gold);"></i> Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± WebSocket<br>
                <i class="fas fa-users" style="color: var(--green);"></i> Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† Ù…Ø¨Ø§Ø´Ø±Ø©<br>
                <i class="fas fa-sync" style="color: var(--blue);"></i> ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙˆØ±ÙŠØ© Ù„Ù„ØªØµÙˆÙŠØª ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„<br>
                <i class="fas fa-shield-alt" style="color: var(--red);"></i> Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù…ÙŠØ© ÙˆØ¢Ù…Ù†Ø©
            </div>
        </div>
    </div>

    <!-- Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©) -->
    <div class="main-layout" id="main-layout" style="display: none;">
        <!-- Ø§Ù„Ø³Ø§ÙŠØ¯Ø¨Ø§Ø± -->
        <div class="sidebar">
            <div class="brand">
                <div class="logo-text">MISTERAI TV</div>
                <div class="user-info" id="user-info">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </div>
            </div>

            <div class="list">
                <div class="list-header">
                    <div class="list-title">ğŸ“º Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</div>
                    <button class="refresh-btn" id="refresh-channels" title="ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ù†ÙˆØ§Øª">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                
                <div id="channels">
                    <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ù‡Ù†Ø§ -->
                </div>
            </div>

            <div class="footer-rights">
                <div><b>ÙƒØ£Ø³ Ø£ÙØ±ÙŠÙ‚ÙŠØ§ 2026</b> - Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ÙˆØ§Ù„Ø¯Ø±Ø¯Ø´Ø©</div>
                <div class="server-stats" id="server-stats">
                    <i class="fas fa-server"></i> Ø§Ù„Ø®Ø§Ø¯Ù…: Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...
                </div>
                <div style="font-size: 0.75rem; opacity: 0.8; margin-top: 3px;">
                    MisterAI TV GLOBAL Â© 2026 | WebSocket Chat v3.0
                </div>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div class="main-content">
            <div class="stream-area">
                <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± -->
                <div class="video-container">
                    <div class="video-placeholder">
                        <div class="video-title">ÙƒØ£Ø³ Ø£ÙØ±ÙŠÙ‚ÙŠØ§ 2026</div>
                        <div class="video-subtitle">Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± - Ø¯ÙˆØ± Ø±Ø¨Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</div>
                        <div class="live-indicator">
                            <i class="fas fa-circle"></i>
                            Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± - Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
                        </div>
                    </div>
                </div>

                <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ ÙˆØ§Ù„Ø´Ø§Øª -->
                <div class="poll-chat-container">
                    <!-- Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø§Ù„Ø±Ø£ÙŠ -->
                    <div class="poll-container">
                        <div class="poll-header">
                            <div class="poll-title">Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø±Ø£ÙŠ Ø±Ø¨Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</div>
                            <div class="poll-subtitle">Ù…Ù† Ø³ÙŠÙÙˆØ² ÙˆÙŠØªØ£Ù‡Ù„ Ù„Ù†ØµÙ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ</div>
                            <div class="poll-update-time" id="poll-update-time">--:--</div>
                        </div>

                        <div class="match-info">
                            <div class="teams">
                                <div class="team">
                                    <div class="team-flag">ğŸ‡³ğŸ‡¬</div>
                                    <div class="team-name">Ù†ÙŠØ¬ÙŠØ±ÙŠØ§</div>
                                </div>

                                <div class="vs">VS</div>

                                <div class="team">
                                    <div class="team-flag">ğŸ‡©ğŸ‡¿</div>
                                    <div class="team-name">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</div>
                                </div>
                            </div>

                            <div class="match-details">
                                <i class="far fa-clock"></i> Ø¯ÙˆØ± Ø±Ø¨Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ - Ø§Ù„Ø³Ø§Ø¹Ø©: 17:00
                            </div>
                        </div>

                        <div class="poll-options">
                            <div class="poll-option" data-vote="nigeria">
                                <div class="option-content">
                                    <div class="option-text">
                                        <i class="fas fa-futbol" style="color: var(--green);"></i>
                                        ÙÙˆØ² Ù†ÙŠØ¬ÙŠØ±ÙŠØ§
                                    </div>
                                    <div class="option-percentage" id="nigeria-percent">62%</div>
                                </div>
                                <div class="vote-bar">
                                    <div class="vote-fill nigeria" id="nigeria-bar" style="width: 62%"></div>
                                </div>
                            </div>

                            <div class="poll-option" data-vote="algeria">
                                <div class="option-content">
                                    <div class="option-text">
                                        <i class="fas fa-futbol" style="color: var(--red);"></i>
                                        ÙÙˆØ² Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±
                                    </div>
                                    <div class="option-percentage" id="algeria-percent">38%</div>
                                </div>
                                <div class="vote-bar">
                                    <div class="vote-fill algeria" id="algeria-bar" style="width: 38%"></div>
                                </div>
                            </div>
                        </div>

                        <button class="vote-btn" id="vote-button">
                            <i class="fas fa-vote-yea"></i>
                            ØµÙˆÙ‘Øª Ø§Ù„Ø¢Ù† (ØªØµÙˆÙŠØª Ù…Ø¨Ø§Ø´Ø±)
                        </button>

                        <div class="vote-stats">
                            <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆØ§Øª: <span class="vote-count" id="total-votes">200</span></span>
                            <span>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <span id="last-update">--:--</span></span>
                        </div>

                        <div class="quick-actions">
                            <button class="quick-action" id="reset-poll">
                                <i class="fas fa-redo"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                            </button>
                            <button class="quick-action" id="share-poll">
                                <i class="fas fa-share"></i> Ù…Ø´Ø§Ø±ÙƒØ©
                            </button>
                        </div>
                    </div>

                    <!-- Ù‚Ø³Ù… Ø§Ù„Ø´Ø§Øª -->
                    <div class="chat-container">
                        <div class="chat-header">
                            <div class="chat-title">Ø´Ø§Øª ÙƒØ£Ø³ Ø£ÙØ±ÙŠÙ‚ÙŠØ§ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</div>
                            <div class="chat-subtitle">Ù†Ø§Ù‚Ø´ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ù…Ø¹ Ø§Ù„Ù…Ø´Ø¬Ø¹ÙŠÙ† ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</div>
                            <div class="online-users" id="online-users">
                                <i class="fas fa-users"></i> <span id="online-count">0</span> Ù…ØªØµÙ„
                            </div>
                        </div>

                        <div class="chat-messages" id="chat-messages">
                            <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø³ØªØ¶Ø§Ù Ù‡Ù†Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
                        </div>

                        <div class="typing-indicator" id="typing-indicator">
                            <span id="typing-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø©...</span>
                        </div>

                        <div class="chat-input-container">
                            <input type="text" class="chat-input" id="chat-input" 
                                   placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§ (Ø§Ø¶ØºØ· Enter Ù„Ù„Ø¥Ø±Ø³Ø§Ù„)..." 
                                   maxlength="500" autocomplete="off">
                            <button class="send-btn" id="send-btn">
                                <i class="fas fa-paper-plane"></i>
                                Ø¥Ø±Ø³Ø§Ù„
                            </button>
                        </div>

                        <!-- Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø© -->
                        <div class="quick-actions">
                            <button class="quick-action" id="clear-chat">
                                <i class="fas fa-trash"></i> Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Øª
                            </button>
                            <button class="quick-action" id="emoji-btn">
                                <i class="far fa-smile"></i> Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
                            </button>
                            <button class="quick-action" id="history-btn">
                                <i class="fas fa-history"></i> Ø§Ù„Ø³Ø¬Ù„
                            </button>
                        </div>

                        <!-- Ø²Ø± Ù…Ø´Ø§Ø±ÙƒØ© ØªÙˆÙŠØªØ± -->
                        <a href="#" class="twitter-share" id="twitter-share-btn" target="_blank">
                            <i class="fab fa-twitter"></i>
                            Ø´Ø§Ø±Ùƒ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¹Ù„Ù‰ ØªÙˆÙŠØªØ±
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
    <button class="settings-toggle" id="settings-toggle" title="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">
        <i class="fas fa-cog"></i>
    </button>

    <!-- ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø§Øª -->
    <script src="https://cdn.jsdelivr.net/npm/socket.io-client@4.7.2/dist/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script>
        // ============ Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø© ============
        let socket = null;
        let currentUser = null;
        let isConnected = false;
        let reconnectAttempts = 0;
        const MAX_RECONNECT_ATTEMPTS = 10;
        const RECONNECT_DELAY = 2000;
        let typingTimeout = null;
        let lastTypingTime = 0;

        // ============ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ============
        class UserManager {
            constructor() {
                this.CURRENT_USER_KEY = 'misterai_current_user_v3';
                this.USERS_KEY = 'misterai_registered_users_v3';
                this.isLoggedIn = false;
                this.currentUser = null;
            }

            checkLogin() {
                try {
                    const userData = localStorage.getItem(this.CURRENT_USER_KEY);
                    if (userData) {
                        this.currentUser = JSON.parse(userData);
                        this.isLoggedIn = true;
                        return true;
                    }
                    return false;
                } catch (e) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', e);
                    return false;
                }
            }

            login(twitterHandle) {
                const validation = this.validateTwitterHandle(twitterHandle);
                if (!validation.valid) {
                    return { success: false, error: validation.error };
                }

                try {
                    const user = {
                        id: 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                        twitter: validation.handle,
                        name: this.generateNameFromTwitter(validation.handle),
                        avatar: `https://ui-avatars.com/api/?name=${encodeURIComponent(validation.handle)}&background=00A859&color=fff&bold=true`,
                        joined: Date.now(),
                        lastSeen: Date.now(),
                        socketId: null
                    };

                    // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    const users = this.getRegisteredUsers();
                    users[user.id] = user;
                    localStorage.setItem(this.USERS_KEY, JSON.stringify(users));

                    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    localStorage.setItem(this.CURRENT_USER_KEY, JSON.stringify(user));
                    this.currentUser = user;
                    this.isLoggedIn = true;

                    return { success: true, user: user };
                } catch (e) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', e);
                    return { success: false, error: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' };
                }
            }

            logout() {
                try {
                    if (socket && socket.connected) {
                        socket.disconnect();
                    }
                    
                    localStorage.removeItem(this.CURRENT_USER_KEY);
                    this.currentUser = null;
                    this.isLoggedIn = false;
                    
                    return true;
                } catch (e) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬:', e);
                    return false;
                }
            }

            generateNameFromTwitter(twitterHandle) {
                const name = twitterHandle.replace('@', '');
                return `Ù…Ø´Ø¬Ø¹ ${name}`;
            }

            getRegisteredUsers() {
                try {
                    return JSON.parse(localStorage.getItem(this.USERS_KEY)) || {};
                } catch (e) {
                    return {};
                }
            }

            validateTwitterHandle(handle) {
                if (!handle || handle.trim() === '') {
                    return { valid: false, error: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø­Ø³Ø§Ø¨ ØªÙˆÙŠØªØ±' };
                }
                
                const trimmedHandle = handle.trim();
                
                if (!trimmedHandle.startsWith('@')) {
                    return { valid: false, error: 'ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø­Ø³Ø§Ø¨ ØªÙˆÙŠØªØ± Ø¨Ù€ @' };
                }
                
                if (trimmedHandle.length < 2) {
                    return { valid: false, error: 'Ø­Ø³Ø§Ø¨ ØªÙˆÙŠØªØ± Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹' };
                }
                
                if (trimmedHandle.length > 20) {
                    return { valid: false, error: 'Ø­Ø³Ø§Ø¨ ØªÙˆÙŠØªØ± Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ø§Ù‹' };
                }
                
                // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©
                const validPattern = /^@[a-zA-Z0-9_]+$/;
                if (!validPattern.test(trimmedHandle)) {
                    return { valid: false, error: 'ÙŠØ­ØªÙˆÙŠ Ø­Ø³Ø§Ø¨ ØªÙˆÙŠØªØ± Ø¹Ù„Ù‰ Ø£Ø­Ø±Ù ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­Ø©' };
                }
                
                return { valid: true, handle: trimmedHandle };
            }

            updateLastSeen() {
                if (this.currentUser) {
                    this.currentUser.lastSeen = Date.now();
                    localStorage.setItem(this.CURRENT_USER_KEY, JSON.stringify(this.currentUser));
                }
            }
        }

        // ============ Ù…Ø¯ÙŠØ± Ø§Ù„Ø§ØªØµØ§Ù„ ============
        class ConnectionManager {
            constructor() {
                this.socket = null;
                this.isConnected = false;
                this.reconnectAttempts = 0;
                this.connectionStatus = document.getElementById('connection-status');
                this.statusText = document.getElementById('status-text');
            }

            connect() {
                try {
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø§ØªØµØ§Ù„ WebSocket
                    this.socket = io(window.location.origin, {
                        transports: ['websocket', 'polling'],
                        reconnection: true,
                        reconnectionAttempts: MAX_RECONNECT_ATTEMPTS,
                        reconnectionDelay: RECONNECT_DELAY,
                        timeout: 10000
                    });

                    this.setupEventListeners();
                    this.updateStatus('connecting', 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…...');
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:', error);
                    this.handleConnectionError();
                }
            }

            setupEventListeners() {
                if (!this.socket) return;

                // Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„
                this.socket.on('connect', () => {
                    console.log('âœ… Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…:', this.socket.id);
                    this.isConnected = true;
                    this.reconnectAttempts = 0;
                    this.updateStatus('connected', 'Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©');
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø¹Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„
                    setTimeout(() => {
                        if (currentUser) {
                            this.joinChat(currentUser);
                        }
                    }, 500);
                    
                    // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø®Ø§Ø¯Ù…
                    this.updateServerStats();
                });

                // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„ØªØ±Ø­ÙŠØ¨
                this.socket.on('welcome', (data) => {
                    console.log('ğŸ‘‹ ØªØ±Ø­ÙŠØ¨ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…:', data.message);
                    this.showToast(`Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ${data.message}`, 'success');
                });

                // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
                this.socket.on('initialData', (data) => {
                    console.log('ğŸ“¥ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©:', data);
                    this.handleInitialData(data);
                });

                // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØµÙˆÙŠØª
                this.socket.on('pollUpdate', (pollData) => {
                    console.log('ğŸ“Š ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØµÙˆÙŠØª:', pollData);
                    this.updatePollDisplay(pollData);
                });

                // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
                this.socket.on('newMessage', (message) => {
                    console.log('ğŸ’¬ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©:', message);
                    this.addMessage(message);
                });

                // Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ Ø§Ù†Ø¶Ù…
                this.socket.on('userJoined', (data) => {
                    console.log('ğŸ‘¤ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯:', data.user.twitter);
                    this.updateOnlineUsers(data.onlineCount);
                    
                    if (message.type !== 'system') {
                        this.showToast(`${data.user.twitter} Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©`, 'info');
                    }
                });

                // Ù…Ø³ØªØ®Ø¯Ù… ØºØ§Ø¯Ø±
                this.socket.on('userLeft', (data) => {
                    console.log('ğŸ‘‹ Ù…Ø³ØªØ®Ø¯Ù… ØºØ§Ø¯Ø±:', data.user.twitter);
                    this.updateOnlineUsers(data.onlineCount);
                    
                    if (message.type !== 'system') {
                        this.showToast(`${data.user.twitter} ØºØ§Ø¯Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©`, 'warning');
                    }
                });

                // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                this.socket.on('usersUpdate', (users) => {
                    this.updateOnlineUsers(users.length || users);
                });

                // Ø±Ø³Ø§Ù„Ø© Ù…Ø¹Ø¬Ø¨Ø©
                this.socket.on('messageLiked', (data) => {
                    this.updateMessageLikes(data.messageId, data.likes);
                });

                // Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµÙˆÙŠØª
                this.socket.on('voteError', (error) => {
                    this.showToast(error.message || 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµÙˆÙŠØª', 'error');
                });

                // Ø§Ù†Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„
                this.socket.on('disconnect', (reason) => {
                    console.log('âŒ Ø§Ù†Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„:', reason);
                    this.isConnected = false;
                    
                    if (reason === 'io server disconnect') {
                        this.updateStatus('disconnected', 'Ø§Ù„Ø®Ø§Ø¯Ù… Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„');
                        setTimeout(() => this.socket.connect(), 1000);
                    } else {
                        this.updateStatus('connecting', 'Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„...');
                    }
                });

                // Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„
                this.socket.on('connect_error', (error) => {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:', error);
                    this.handleConnectionError();
                });

                // ping/pong
                this.socket.on('pong', (data) => {
                    // console.log('ğŸ“ pong:', data);
                });
            }

            joinChat(user) {
                if (!this.socket || !this.isConnected) return;

                this.socket.emit('join', {
                    name: user.name,
                    twitter: user.twitter,
                    avatar: user.avatar
                });
                
                currentUser = user;
                currentUser.socketId = this.socket.id;
            }

            sendMessage(text) {
                if (!this.socket || !this.isConnected) {
                    this.showToast('ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…', 'error');
                    return false;
                }

                if (!text || text.trim().length === 0) {
                    return false;
                }

                this.socket.emit('sendMessage', {
                    text: text.trim(),
                    timestamp: Date.now()
                });

                return true;
            }

            sendVote(team) {
                if (!this.socket || !this.isConnected) {
                    this.showToast('ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…', 'error');
                    return false;
                }

                this.socket.emit('vote', {
                    team: team,
                    timestamp: Date.now()
                });

                return true;
            }

            likeMessage(messageId) {
                if (!this.socket || !this.isConnected) return;
                
                this.socket.emit('likeMessage', messageId);
            }

            resetPoll() {
                if (!this.socket || !this.isConnected) return;
                
                this.socket.emit('resetPoll');
            }

            sendActivity() {
                if (!this.socket || !this.isConnected) return;
                
                this.socket.emit('activity');
            }

            handleInitialData(data) {
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØµÙˆÙŠØª
                if (data.poll) {
                    this.updatePollDisplay(data.poll);
                }

                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
                if (data.recentMessages && data.recentMessages.length > 0) {
                    const chatMessages = document.getElementById('chat-messages');
                    chatMessages.innerHTML = '';
                    
                    data.recentMessages.forEach(msg => {
                        this.addMessage(msg, false);
                    });
                    
                    setTimeout(() => {
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 100);
                }

                // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
                if (data.onlineUsers) {
                    this.updateOnlineUsers(data.totalOnline || data.onlineUsers.length);
                }
            }

            updatePollDisplay(pollData) {
                const nigeriaPercent = pollData.nigeria.percentage || 0;
                const algeriaPercent = pollData.algeria.percentage || 0;
                const totalVotes = pollData.total || 0;
                
                document.getElementById('nigeria-percent').textContent = nigeriaPercent + '%';
                document.getElementById('algeria-percent').textContent = algeriaPercent + '%';
                
                document.getElementById('nigeria-bar').style.width = nigeriaPercent + '%';
                document.getElementById('algeria-bar').style.width = algeriaPercent + '%';
                
                document.getElementById('total-votes').textContent = totalVotes.toLocaleString();
                
                const now = new Date();
                const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                document.getElementById('last-update').textContent = timeString;
                document.getElementById('poll-update-time').textContent = timeString;
                
                // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„ØªØµÙˆÙŠØª
                this.updateVoteButton();
            }

            addMessage(message, scroll = true) {
                const chatMessages = document.getElementById('chat-messages');
                
                // Ø¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø© "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„"
                if (chatMessages.innerHTML.includes('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„')) {
                    chatMessages.innerHTML = '';
                }
                
                const messageElement = this.createMessageElement(message);
                chatMessages.appendChild(messageElement);
                
                if (scroll) {
                    setTimeout(() => {
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 100);
                }
                
                // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                if (message.userId !== currentUser?.socketId) {
                    messageElement.classList.add('new');
                    setTimeout(() => {
                        messageElement.classList.remove('new');
                    }, 2000);
                }
            }

            createMessageElement(message) {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${message.type || 'user'}`;
                messageElement.dataset.messageId = message.id;
                
                let actionsHTML = '';
                if (message.type === 'user') {
                    actionsHTML = `
                        <div class="message-actions">
                            <button class="message-action like-btn" data-message-id="${message.id}">
                                <i class="far fa-thumbs-up"></i>
                                <span class="like-count">${message.likes || 0}</span>
                            </button>
                            <button class="message-action reply-btn">
                                <i class="far fa-comment"></i> Ø±Ø¯
                            </button>
                        </div>
                    `;
                }
                
                messageElement.innerHTML = `
                    <div class="message-header">
                        <div class="message-user">
                            <div class="message-avatar" style="background: ${this.getAvatarColor(message.user)}">
                                <i class="fas fa-user"></i>
                            </div>
                            ${message.user}
                            <span class="twitter-badge">${message.twitter}</span>
                        </div>
                        <div class="message-time">${message.time}</div>
                    </div>
                    <div class="message-text">${this.escapeHtml(message.text)}</div>
                    ${actionsHTML}
                `;
                
                return messageElement;
            }

            updateMessageLikes(messageId, likes) {
                const messageElement = document.querySelector(`[data-message-id="${messageId}"]`);
                if (messageElement) {
                    const likeCount = messageElement.querySelector('.like-count');
                    if (likeCount) {
                        likeCount.textContent = likes;
                    }
                }
            }

            updateOnlineUsers(count) {
                document.getElementById('online-count').textContent = count;
                document.getElementById('online-users').innerHTML = `
                    <i class="fas fa-users"></i> ${count} Ù…ØªØµÙ„
                `;
            }

            updateVoteButton() {
                const voteButton = document.getElementById('vote-button');
                const selectedOption = document.querySelector('.poll-option.selected');
                
                if (selectedOption) {
                    voteButton.disabled = false;
                    voteButton.innerHTML = `
                        <i class="fas fa-vote-yea"></i>
                        ØµÙˆÙ‘Øª Ù„Ù€ ${selectedOption.dataset.vote === 'nigeria' ? 'Ù†ÙŠØ¬ÙŠØ±ÙŠØ§ ğŸ‡³ğŸ‡¬' : 'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± ğŸ‡©ğŸ‡¿'}
                    `;
                } else {
                    voteButton.disabled = true;
                    voteButton.innerHTML = `
                        <i class="fas fa-vote-yea"></i>
                        Ø§Ø®ØªØ± ÙØ±ÙŠÙ‚Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹
                    `;
                }
            }

            updateServerStats() {
                if (!this.isConnected) return;
                
                fetch('/api/stats')
                    .then(res => res.json())
                    .then(data => {
                        const uptime = Math.floor(data.serverUptime);
                        const hours = Math.floor(uptime / 3600);
                        const minutes = Math.floor((uptime % 3600) / 60);
                        
                        document.getElementById('server-stats').innerHTML = `
                            <i class="fas fa-server"></i> Ø§Ù„Ø®Ø§Ø¯Ù…: ${hours}Ø³ ${minutes}Ø¯ | ${data.onlineUsers} Ù…ØªØµÙ„
                        `;
                    })
                    .catch(console.error);
            }

            updateStatus(status, text) {
                this.connectionStatus.className = `connection-status ${status}`;
                this.statusText.textContent = text;
            }

            handleConnectionError() {
                this.reconnectAttempts++;
                
                if (this.reconnectAttempts <= MAX_RECONNECT_ATTEMPTS) {
                    this.updateStatus('connecting', 
                        `Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ (${this.reconnectAttempts}/${MAX_RECONNECT_ATTEMPTS})...`);
                    
                    setTimeout(() => {
                        this.connect();
                    }, RECONNECT_DELAY * this.reconnectAttempts);
                } else {
                    this.updateStatus('disconnected', 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
                    this.showToast('ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­Ù„ÙŠ.', 'error');
                }
            }

            showToast(message, type = 'info') {
                const backgroundColor = {
                    success: '#00A859',
                    error: '#D62828',
                    warning: '#FFD700',
                    info: '#1DA1F2'
                }[type];
                
                Toastify({
                    text: message,
                    duration: 3000,
                    gravity: "top",
                    position: "left",
                    backgroundColor: backgroundColor,
                    stopOnFocus: true,
                    className: 'toast-arabic'
                }).showToast();
            }

            getAvatarColor(username) {
                const colors = [
                    'linear-gradient(45deg, #00A859, #1DA1F2)',
                    'linear-gradient(45deg, #FFD700, #D62828)',
                    'linear-gradient(45deg, #9C27B0, #00BCD4)',
                    'linear-gradient(45deg, #FF9800, #4CAF50)'
                ];
                const index = username.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0) % colors.length;
                return colors[index];
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            disconnect() {
                if (this.socket) {
                    this.socket.disconnect();
                    this.socket = null;
                    this.isConnected = false;
                    this.updateStatus('disconnected', 'ØºÙŠØ± Ù…ØªØµÙ„');
                }
            }
        }

        // ============ Ù…Ø¯ÙŠØ± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ============
        class AppManager {
            constructor() {
                this.userManager = new UserManager();
                this.connectionManager = new ConnectionManager();
                this.selectedVote = null;
                
                this.initialize();
            }

            initialize() {
                this.checkAuth();
                this.setupGlobalEvents();
            }

            checkAuth() {
                if (this.userManager.checkLogin()) {
                    this.showMainApp();
                } else {
                    this.showLoginScreen();
                }
            }

            showLoginScreen() {
                document.getElementById('login-screen').style.display = 'flex';
                document.getElementById('main-layout').style.display = 'none';
                this.setupLoginEvents();
            }

            showMainApp() {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('main-layout').style.display = 'flex';
                
                this.updateUserInfo();
                this.loadChannels();
                this.setupAppEvents();
                this.updateTwitterShareLink();
                
                // Ø¨Ø¯Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…
                setTimeout(() => {
                    this.connectionManager.connect();
                }, 300);
                
                // ØªØ­Ø¯ÙŠØ« Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
                setInterval(() => {
                    this.userManager.updateLastSeen();
                }, 60000);
            }

            setupLoginEvents() {
                const loginBtn = document.getElementById('login-btn');
                const loginInput = document.getElementById('login-twitter');
                const loginError = document.getElementById('login-error');

                loginBtn.addEventListener('click', () => this.handleLogin());
                loginInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.handleLogin();
                    }
                });

                // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø®Ø·Ø£ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
                loginInput.addEventListener('input', () => {
                    loginError.style.display = 'none';
                });
                
                // ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
                loginInput.focus();
            }

            setupGlobalEvents() {
                // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø®Ø§Ø¯Ù… ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
                setInterval(() => {
                    if (this.connectionManager.isConnected) {
                        this.connectionManager.updateServerStats();
                    }
                }, 30000);
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø©
                document.addEventListener('visibilitychange', () => {
                    if (!document.hidden && !this.connectionManager.isConnected) {
                        setTimeout(() => {
                            this.connectionManager.connect();
                        }, 1000);
                    }
                });
            }

            handleLogin() {
                const twitterHandle = document.getElementById('login-twitter').value;
                const loginError = document.getElementById('login-error');

                const result = this.userManager.login(twitterHandle);
                if (result.success) {
                    this.showMainApp();
                    this.connectionManager.showToast(`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${result.user.twitter}! ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„Ùƒ Ø¨Ù†Ø¬Ø§Ø­.`, 'success');
                } else {
                    loginError.textContent = result.error;
                    loginError.style.display = 'block';
                    loginInput.focus();
                }
            }

            updateUserInfo() {
                const userInfo = document.getElementById('user-info');
                const user = this.userManager.currentUser;
                
                userInfo.innerHTML = `
                    <div class="user-avatar">
                        <i class="fab fa-twitter"></i>
                    </div>
                    <div class="user-details">
                        <div class="user-name">${user.name}</div>
                        <div class="user-twitter">${user.twitter}</div>
                        <div class="online-counter" id="user-online-counter">
                            <i class="fas fa-users"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...
                        </div>
                    </div>
                    <button class="logout-btn" id="logout-btn" title="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                `;
            }

            loadChannels() {
                const channels = [
                    {c:"beIN SPORTS MAX",n:"beIN MAX 1 4K",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432904.m3u8"},
                    {c:"beIN SPORTS MAX",n:"beIN MAX 1 FHD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432903.m3u8"},
                    {c:"beIN SPORTS MAX",n:"beIN MAX 1 HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432902.m3u8"},
                    {c:"beIN SPORTS MAX",n:"beIN MAX 1 SD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432901.m3u8"},
                    {c:"beIN SPORTS MAX",n:"beIN MAX 2 4K",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432900.m3u8"},
                    {c:"beIN SPORTS MAX",n:"beIN MAX 2 FHD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432899.m3u8"},
                    {c:"beIN SPORTS MAX",n:"beIN MAX 2 HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432898.m3u8"},
                    {c:"beIN SPORTS MAX",n:"beIN MAX 2 SD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432897.m3u8"},
                    {c:"Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„ÙˆØ·Ù†ÙŠØ©",n:"Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙˆØ·Ù†ÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432888.m3u8"},
                    {c:"Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©",n:"CANAL+ CAN HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432884.m3u8"},
                    {c:"Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©",n:"beIN SPORTS 1 HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432883.m3u8"},
                    {c:"Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©",n:"beIN SPORTS 2 HD",u:"http://fr.ottv.pro/live/4476647188407159/4476647188407159/432882.m3u8"},
                    {c:"beIN PREMIUM",n:"beIN SPORT 1",u:"http://135.125.109.73:9000/beinsport1_.m3u8"},
                    {c:"beIN PREMIUM",n:"beIN SPORT 2",u:"http://135.125.109.73:9000/beinsport2_.m3u8"},
                    {c:"beIN PREMIUM",n:"beIN SPORT 3",u:"http://135.125.109.73:9000/beinsport3_.m3u8"},
                    {c:"beIN PREMIUM",n:"beIN SPORT 4",u:"http://135.125.109.73:9000/beinsport4_.m3u8"},
                    {c:"beIN PREMIUM",n:"beIN SPORT 5",u:"http://135.125.109.73:9000/beinsport5_.m3u8"}
                ];

                const list = document.getElementById("channels");
                list.innerHTML = '';
                
                let lastCategory = "";
                let categoryCount = 0;
                
                channels.forEach(channel => {
                    if (channel.c !== lastCategory) {
                        if (lastCategory !== "") {
                            const lastCatElement = list.querySelector('.cat:last-child');
                            if (lastCatElement) {
                                const countSpan = document.createElement('span');
                                countSpan.className = 'cat-count';
                                countSpan.textContent = categoryCount;
                                lastCatElement.appendChild(countSpan);
                            }
                        }
                        
                        const category = document.createElement("div");
                        category.className = "cat";
                        category.textContent = channel.c;
                        list.appendChild(category);
                        lastCategory = channel.c;
                        categoryCount = 0;
                    }
                    
                    const button = document.createElement("div");
                    button.className = "btn";
                    button.innerHTML = `
                        <span>${channel.n}</span>
                        <span class="badge">LIVE</span>
                    `;
                    button.onclick = () => {
                        if (channel.u && channel.u.trim()) {
                            window.open(channel.u.trim(), "_blank");
                        }
                    };
                    list.appendChild(button);
                    categoryCount++;
                });
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø¯Ø¯ Ù„Ù„ÙØ¦Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©
                const lastCatElement = list.querySelector('.cat:last-child');
                if (lastCatElement) {
                    const countSpan = document.createElement('span');
                    countSpan.className = 'cat-count';
                    countSpan.textContent = categoryCount;
                    lastCatElement.appendChild(countSpan);
                }
            }

            setupAppEvents() {
                // Ø§Ø®ØªÙŠØ§Ø± Ø®ÙŠØ§Ø± Ø§Ù„ØªØµÙˆÙŠØª
                document.querySelectorAll('.poll-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        document.querySelectorAll('.poll-option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        e.currentTarget.classList.add('selected');
                        this.selectedVote = e.currentTarget.getAttribute('data-vote');
                        
                        this.connectionManager.updateVoteButton();
                    });
                });

                // Ø²Ø± Ø§Ù„ØªØµÙˆÙŠØª
                document.getElementById('vote-button').addEventListener('click', () => this.submitVote());

                // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ù€ Enter
                const chatInput = document.getElementById('chat-input');
                chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendChatMessage();
                    }
                });

                // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ø²Ø±
                document.getElementById('send-btn').addEventListener('click', () => this.sendChatMessage());

                // Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
                chatInput.addEventListener('input', () => {
                    this.handleTyping();
                });

                // Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                document.getElementById('logout-btn').addEventListener('click', () => this.logout());

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªØµÙˆÙŠØª
                document.getElementById('reset-poll').addEventListener('click', () => {
                    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø§Ù„Ø±Ø£ÙŠØŸ')) {
                        this.connectionManager.resetPoll();
                    }
                });

                // Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Øª
                document.getElementById('clear-chat').addEventListener('click', () => {
                    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Ø§Ù„Ø´Ø§ØªØŸ')) {
                        document.getElementById('chat-messages').innerHTML = '';
                        this.connectionManager.showToast('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Øª', 'success');
                    }
                });

                // Ø²Ø± Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
                document.getElementById('emoji-btn').addEventListener('click', () => {
                    this.showEmojiPicker();
                });

                // Ø²Ø± Ø§Ù„Ø³Ø¬Ù„
                document.getElementById('history-btn').addEventListener('click', () => {
                    this.loadChatHistory();
                });

                // Ø²Ø± Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªØµÙˆÙŠØª
                document.getElementById('share-poll').addEventListener('click', () => {
                    this.sharePollResults();
                });

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ù†ÙˆØ§Øª
                document.getElementById('refresh-channels').addEventListener('click', () => {
                    this.loadChannels();
                    this.connectionManager.showToast('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ù†ÙˆØ§Øª', 'success');
                });

                // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                document.getElementById('settings-toggle').addEventListener('click', () => {
                    this.showSettings();
                });

                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª
                document.addEventListener('click', (e) => {
                    if (e.target.closest('.like-btn')) {
                        const messageId = e.target.closest('.like-btn').dataset.messageId;
                        this.connectionManager.likeMessage(messageId);
                    }
                });
            }

            submitVote() {
                if (!this.selectedVote) {
                    this.connectionManager.showToast('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ÙØ±ÙŠÙ‚ Ù„Ù„ØªØµÙˆÙŠØª', 'error');
                    return;
                }
                
                const success = this.connectionManager.sendVote(this.selectedVote);
                
                if (success) {
                    const voteButton = document.getElementById('vote-button');
                    voteButton.disabled = true;
                    voteButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµÙˆÙŠØª...';
                    
                    setTimeout(() => {
                        voteButton.innerHTML = '<i class="fas fa-check"></i> Ø´ÙƒØ±Ø§Ù‹ Ù„ØªØµÙˆÙŠØªÙƒ!';
                    }, 2000);
                }
            }

            sendChatMessage() {
                const chatInput = document.getElementById('chat-input');
                const messageText = chatInput.value.trim();
                
                if (!messageText) {
                    this.connectionManager.showToast('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ù„Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„', 'error');
                    return;
                }
                
                if (messageText.length < 2) {
                    this.connectionManager.showToast('Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‚ØµÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹', 'error');
                    return;
                }
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ø¨Ø± WebSocket
                const success = this.connectionManager.sendMessage(messageText);
                
                if (success) {
                    chatInput.value = '';
                    chatInput.focus();
                    
                    // Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
                    this.hideTypingIndicator();
                }
            }

            handleTyping() {
                const now = Date.now();
                
                // Ø¥Ø±Ø³Ø§Ù„ Ù†Ø´Ø§Ø· Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙƒÙ„ 3 Ø«ÙˆØ§Ù†ÙŠ
                if (now - lastTypingTime > 3000) {
                    this.connectionManager.sendActivity();
                    lastTypingTime = now;
                }
                
                // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
                const chatInput = document.getElementById('chat-input');
                const typingIndicator = document.getElementById('typing-indicator');
                
                if (chatInput.value.trim().length > 0) {
                    typingIndicator.classList.add('show');
                } else {
                    typingIndicator.classList.remove('show');
                }
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙˆÙ‚Øª
                clearTimeout(typingTimeout);
                typingTimeout = setTimeout(() => {
                    typingIndicator.classList.remove('show');
                }, 2000);
            }

            hideTypingIndicator() {
                const typingIndicator = document.getElementById('typing-indicator');
                typingIndicator.classList.remove('show');
            }

            logout() {
                if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©ØŸ')) {
                    this.connectionManager.disconnect();
                    this.userManager.logout();
                    
                    setTimeout(() => {
                        location.reload();
                    }, 500);
                }
            }

            showEmojiPicker() {
                const emojis = ['ğŸ˜€', 'ğŸ˜‚', 'ğŸ¥³', 'âš½', 'ğŸ‰', 'ğŸ‘', 'â¤ï¸', 'ğŸ”¥', 'â­', 'ğŸ†'];
                const chatInput = document.getElementById('chat-input');
                
                const picker = document.createElement('div');
                picker.className = 'emoji-picker';
                picker.style.cssText = `
                    position: absolute;
                    bottom: 60px;
                    right: 20px;
                    background: rgba(20,20,30,0.95);
                    border-radius: 10px;
                    padding: 10px;
                    display: grid;
                    grid-template-columns: repeat(5, 1fr);
                    gap: 5px;
                    border: 2px solid var(--blue);
                    z-index: 1000;
                `;
                
                emojis.forEach(emoji => {
                    const btn = document.createElement('button');
                    btn.textContent = emoji;
                    btn.style.cssText = `
                        background: none;
                        border: none;
                        font-size: 1.5rem;
                        cursor: pointer;
                        padding: 5px;
                        border-radius: 5px;
                        transition: all 0.3s ease;
                    `;
                    btn.onmouseover = () => btn.style.background = 'rgba(255,255,255,0.1)';
                    btn.onmouseout = () => btn.style.background = 'none';
                    btn.onclick = () => {
                        chatInput.value += emoji;
                        chatInput.focus();
                        picker.remove();
                    };
                    picker.appendChild(btn);
                });
                
                document.body.appendChild(picker);
                
                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ù†ØªÙ‚ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ÙŠØ§Ù‹
                setTimeout(() => {
                    const closePicker = (e) => {
                        if (!picker.contains(e.target)) {
                            picker.remove();
                            document.removeEventListener('click', closePicker);
                        }
                    };
                    document.addEventListener('click', closePicker);
                }, 100);
            }

            loadChatHistory() {
                this.connectionManager.showToast('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©...', 'info');
                
                fetch('/api/chat/history?limit=50')
                    .then(res => res.json())
                    .then(data => {
                        const chatMessages = document.getElementById('chat-messages');
                        const currentMessages = chatMessages.innerHTML;
                        
                        chatMessages.innerHTML = '';
                        data.messages.forEach(msg => {
                            this.connectionManager.addMessage(msg, false);
                        });
                        
                        this.connectionManager.showToast(`ØªÙ… ØªØ­Ù…ÙŠÙ„ ${data.messages.length} Ø±Ø³Ø§Ù„Ø©`, 'success');
                    })
                    .catch(error => {
                        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„:', error);
                        this.connectionManager.showToast('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„', 'error');
                    });
            }

            sharePollResults() {
                const nigeriaPercent = document.getElementById('nigeria-percent').textContent;
                const algeriaPercent = document.getElementById('algeria-percent').textContent;
                const totalVotes = document.getElementById('total-votes').textContent;
                
                const text = `ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ø³ØªØ·Ù„Ø§Ø¹ ÙƒØ£Ø³ Ø£ÙØ±ÙŠÙ‚ÙŠØ§ 2026:
ğŸ‡³ğŸ‡¬ Ù†ÙŠØ¬ÙŠØ±ÙŠØ§: ${nigeriaPercent}
ğŸ‡©ğŸ‡¿ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±: ${algeriaPercent}
Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆØ§Øª: ${totalVotes}

Ø´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„ØªØµÙˆÙŠØª Ø§Ù„Ø¢Ù† Ø¹Ù„Ù‰ MisterAI TV!`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Ù†ØªØ§Ø¦Ø¬ Ø§Ø³ØªØ·Ù„Ø§Ø¹ ÙƒØ£Ø³ Ø£ÙØ±ÙŠÙ‚ÙŠØ§',
                        text: text,
                        url: window.location.href
                    });
                } else {
                    navigator.clipboard.writeText(text)
                        .then(() => this.connectionManager.showToast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªØ§Ø¦Ø¬', 'success'))
                        .catch(() => this.connectionManager.showToast('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø³Ø®', 'error'));
                }
            }

            updateTwitterShareLink() {
                const user = this.userManager.currentUser;
                const hashtags = 'ÙƒØ£Ø³_Ø£ÙØ±ÙŠÙ‚ÙŠØ§,AFCON2026,MisterAITV,Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©_Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©';
                const url = window.location.href.split('#')[0];
                
                const tweetText = `Ø£Ù†Ø§ Ø£Ø´Ø§Ù‡Ø¯ Ù…Ø¨Ø§Ø±Ø§Ø© Ù†ÙŠØ¬ÙŠØ±ÙŠØ§ Ø¶Ø¯ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± ÙÙŠ ÙƒØ£Ø³ Ø£ÙØ±ÙŠÙ‚ÙŠØ§ 2026 Ø¹Ù„Ù‰ MisterAI TV Ù…Ø¹ Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¨Ø§Ø´Ø±Ø©! ${user.twitter} `;
                const twitterShareBtn = document.getElementById('twitter-share-btn');
                
                twitterShareBtn.href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}&hashtags=${hashtags}&url=${encodeURIComponent(url)}`;
            }

            showSettings() {
                const settings = `
                    <div style="position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); 
                    background:rgba(20,20,30,0.98); padding:30px; border-radius:15px; 
                    border:2px solid var(--blue); z-index:2000; max-width:400px; width:90%;">
                        <h3 style="color:var(--gold); margin-bottom:20px; text-align:center;">
                            <i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
                        </h3>
                        
                        <div style="margin-bottom:15px;">
                            <label style="color:#aaa; display:block; margin-bottom:5px;">Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</label>
                            <label style="display:flex; align-items:center; gap:10px; color:white;">
                                <input type="checkbox" id="notifications-toggle" checked>
                                ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                            </label>
                        </div>
                        
                        <div style="margin-bottom:15px;">
                            <label style="color:#aaa; display:block; margin-bottom:5px;">Ù…Ø¸Ù‡Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</label>
                            <select style="width:100%; padding:8px; border-radius:5px; background:rgba(255,255,255,0.1); 
                            color:white; border:1px solid var(--green);">
                                <option value="default">Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</option>
                                <option value="dark">Ù…Ø¸Ù„Ù…</option>
                                <option value="light">ÙØ§ØªØ­</option>
                            </select>
                        </div>
                        
                        <div style="display:flex; gap:10px; margin-top:25px;">
                            <button onclick="this.closest('div').remove()" 
                            style="flex:1; padding:10px; background:var(--red); color:white; 
                            border:none; border-radius:8px; cursor:pointer;">
                                Ø¥ØºÙ„Ø§Ù‚
                            </button>
                            <button onclick="appManager.saveSettings()" 
                            style="flex:1; padding:10px; background:var(--green); color:white; 
                            border:none; border-radius:8px; cursor:pointer;">
                                Ø­ÙØ¸
                            </button>
                        </div>
                    </div>
                    <div style="position:fixed; top:0; left:0; right:0; bottom:0; 
                    background:rgba(0,0,0,0.7); z-index:1999;" 
                    onclick="this.remove(); this.previousElementSibling.remove();"></div>
                `;
                
                document.body.insertAdjacentHTML('beforeend', settings);
            }

            saveSettings() {
                this.connectionManager.showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'success');
                document.querySelector('[style*="position:fixed; top:0; left:0"]').click();
            }
        }

        // ============ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ============
        let appManager;

        document.addEventListener('DOMContentLoaded', () => {
            // Ø¥Ø¶Ø§ÙØ© CSS Ù„Ù„Ù€ Toast
            const toastStyle = document.createElement('style');
            toastStyle.textContent = `
                .toast-arabic {
                    font-family: 'Cairo', sans-serif;
                    font-weight: 600;
                    border-radius: 8px;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                }
            `;
            document.head.appendChild(toastStyle);
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… WebSocket
            if (!window.WebSocket && !window.MozWebSocket) {
                alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ØªØµÙØ­ Ø­Ø¯ÙŠØ«.');
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… localStorage
            if (!window.localStorage) {
                alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ØªØµÙØ­ Ø¢Ø®Ø±.');
                return;
            }
            
            try {
                appManager = new AppManager();
                window.appManager = appManager;
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚. ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.');
            }
        });

        // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ù†Ø¯ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø§ØªØµØ§Ù„
        window.addEventListener('online', () => {
            if (appManager && appManager.connectionManager && !appManager.connectionManager.isConnected) {
                setTimeout(() => {
                    appManager.connectionManager.connect();
                }, 1000);
            }
        });

        // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
        window.addEventListener('offline', () => {
            const statusElement = document.getElementById('connection-status');
            if (statusElement) {
                statusElement.className = 'connection-status disconnected';
                document.getElementById('status-text').textContent = 'ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª';
            }
        });

        // Ù…Ù†Ø¹ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø±Ø³Ø§Ù„Ø© ØºÙŠØ± Ù…Ø±Ø³Ù„Ø©
        window.addEventListener('beforeunload', (e) => {
            const chatInput = document.getElementById('chat-input');
            if (chatInput && chatInput.value.trim().length > 0) {
                e.preventDefault();
                e.returnValue = 'Ù„Ø¯ÙŠÙƒ Ø±Ø³Ø§Ù„Ø© ØºÙŠØ± Ù…Ø±Ø³Ù„Ø©. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©ØŸ';
            }
        });
    </script>
</body>
</html>
